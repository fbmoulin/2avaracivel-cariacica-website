{% extends "base.html" %}

{% block title %}Agendamento de Reunião com Assessores - 2ª Vara Cível de Cariacica{% endblock %}

{% block meta %}
<meta name="description" content="Agende uma reunião com os assessores da 2ª Vara Cível de Cariacica para esclarecimentos sobre processos e orientações jurídicas.">
<meta name="keywords" content="agendamento, reunião, assessores, vara cível, cariacica, orientação jurídica">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm bg-primary text-white">
                <div class="card-body text-center py-4">
                    <h1 class="display-6 mb-2">
                        <i class="fas fa-calendar-plus me-3"></i>
                        Agendamento de Reunião com Assessores
                    </h1>
                    <p class="lead mb-0">Agende uma reunião para esclarecimentos sobre processos e orientações jurídicas</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="row">
        <div class="col-lg-8 mx-auto">
            
            <!-- Information Card -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body">
                    <h3 class="text-primary mb-3">
                        <i class="fas fa-info-circle me-2"></i>
                        Sobre as Reuniões com Assessores
                    </h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5 class="text-secondary mb-3">O que você pode esclarecer:</h5>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Andamento de processos</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Orientações sobre documentos</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Prazos processuais</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Procedimentos da vara</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Informações gerais sobre o processo</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-secondary mb-3">Informações importantes:</h5>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-clock text-primary me-2"></i>Duração: 30-60 minutos</li>
                                <li class="mb-2"><i class="fas fa-calendar text-primary me-2"></i>Seg a Sex: 12h às 18h</li>
                                <li class="mb-2"><i class="fas fa-laptop text-primary me-2"></i>Presencial ou virtual</li>
                                <li class="mb-2"><i class="fas fa-id-card text-primary me-2"></i>Documento obrigatório</li>
                                <li class="mb-2"><i class="fas fa-file-alt text-primary me-2"></i>Número do processo (se houver)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scheduling Form -->
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h3 class="text-primary mb-4">
                        <i class="fas fa-user-plus me-2"></i>
                        Dados para Agendamento
                    </h3>

                    <form id="assessor-meeting-form" method="POST" action="/servicos/agendar-assessor">
                        <!-- Personal Information -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="full_name" class="form-label">Nome Completo <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="full_name" name="full_name" required>
                            </div>
                            <div class="col-md-6">
                                <label for="document" class="form-label">CPF ou RG <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="document" name="document" required>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <div class="col-md-6">
                                <label for="phone" class="form-label">Telefone <span class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="phone" name="phone" required>
                            </div>
                        </div>

                        <!-- Process Information -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="process_number" class="form-label">Número do Processo</label>
                                <input type="text" class="form-control" id="process_number" name="process_number" 
                                       placeholder="Ex: 1234567-89.2024.8.08.0001">
                                <small class="text-muted">Opcional - Se tiver um processo em andamento</small>
                            </div>
                            <div class="col-md-6">
                                <label for="meeting_type" class="form-label">Tipo de Reunião <span class="text-danger">*</span></label>
                                <select class="form-select" id="meeting_type" name="meeting_type" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="presencial">Presencial</option>
                                    <option value="virtual">Virtual (Online)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Meeting Details -->
                        <div class="mb-4">
                            <label for="meeting_subject" class="form-label">Assunto da Reunião <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="meeting_subject" name="meeting_subject" rows="3" required
                                      placeholder="Descreva brevemente o que você gostaria de esclarecer na reunião"></textarea>
                        </div>

                        <!-- Preferred Date and Time -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="preferred_date" class="form-label">Data Preferida <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="preferred_date" name="preferred_date" required>
                            </div>
                            <div class="col-md-6">
                                <label for="preferred_time" class="form-label">Horário Preferido <span class="text-danger">*</span></label>
                                <select class="form-select" id="preferred_time" name="preferred_time" required>
                                    <option value="">Selecione o horário</option>
                                    <option value="12:00">12:00</option>
                                    <option value="12:30">12:30</option>
                                    <option value="13:00">13:00</option>
                                    <option value="13:30">13:30</option>
                                    <option value="14:00">14:00</option>
                                    <option value="14:30">14:30</option>
                                    <option value="15:00">15:00</option>
                                    <option value="15:30">15:30</option>
                                    <option value="16:00">16:00</option>
                                    <option value="16:30">16:30</option>
                                    <option value="17:00">17:00</option>
                                    <option value="17:30">17:30</option>
                                </select>
                            </div>
                        </div>

                        <!-- Alternative Options -->
                        <div class="mb-4">
                            <label for="alternative_times" class="form-label">Horários Alternativos</label>
                            <textarea class="form-control" id="alternative_times" name="alternative_times" rows="2"
                                      placeholder="Se tiver flexibilidade, informe outros horários de sua preferência"></textarea>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-calendar-check me-2"></i>
                                Enviar Solicitação de Agendamento
                            </button>
                        </div>

                        <!-- CSRF Token if using Flask-WTF -->
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    </form>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="card border-0 shadow-sm mt-4">
                <div class="card-body text-center">
                    <h5 class="text-primary mb-3">Precisa de ajuda?</h5>
                    <p class="mb-2">
                        <i class="fas fa-phone text-primary me-2"></i>
                        <strong>Telefone:</strong> (27) 3246-8200
                    </p>
                    <p class="mb-2">
                        <i class="fas fa-envelope text-primary me-2"></i>
                        <strong>Email:</strong> 2varacivel.cariacica@tjes.jus.br
                    </p>
                    <p class="mb-0">
                        <i class="fas fa-clock text-primary me-2"></i>
                        <strong>Horário:</strong> Segunda a sexta, das 12h às 18h
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set minimum date to today
    const dateInput = document.getElementById('preferred_date');
    const today = new Date().toISOString().split('T')[0];
    dateInput.min = today;
    
    // Add form validation
    const form = document.getElementById('assessor-meeting-form');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Basic validation
        const requiredFields = form.querySelectorAll('[required]');
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value.trim()) {
                field.classList.add('is-invalid');
                isValid = false;
            } else {
                field.classList.remove('is-invalid');
            }
        });
        
        if (isValid) {
            // Show loading state
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Enviando...';
            submitBtn.disabled = true;
            
            // Submit form
            form.submit();
        } else {
            alert('Por favor, preencha todos os campos obrigatórios.');
        }
    });
    
    // Format document input (CPF/RG)
    const documentInput = document.getElementById('document');
    documentInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length <= 11) {
            // Format as CPF
            value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
        }
        e.target.value = value;
    });
    
    // Format phone input
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = value.replace(/(\d{2})(\d{4,5})(\d{4})/, '($1) $2-$3');
        e.target.value = value;
    });
});
</script>
{% endblock %}